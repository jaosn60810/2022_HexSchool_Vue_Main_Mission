(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-372421bc"],{"1dde":function(e,t,a){var c=a("d039"),n=a("b622"),s=a("2d00"),l=n("species");e.exports=function(e){return s>=51||!c((function(){var t=[],a=t.constructor={};return a[l]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"62b3":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("b64b");var c=a("7a23"),n={class:"container"},s=Object(c["h"])("h1",null,"This is 購物車頁面",-1),l={class:"container"},r={class:"row justify-content-center"},o={class:"col-md-6"},i={class:"table align-middle"},d=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th"),Object(c["h"])("th",null,"品名"),Object(c["h"])("th",{style:{width:"110px"}},"數量"),Object(c["h"])("th",null,"單價")])],-1),u=["onClick","disabled"],b={key:0,class:"fas fa-spinner fa-pulse"},f=Object(c["i"])(" 移除購物車 "),m={key:0,class:"text-success"},j={class:"input-group input-group-sm"},h={class:"text-end"},O={key:0,class:"text-success"},p=Object(c["h"])("td",{colspan:"3",class:"text-end"},"總計",-1),g={class:"text-end"},v={key:0},y=Object(c["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),x={class:"text-end text-success"},k={class:"my-5 row justify-content-center"},w={class:"mb-3"},V=Object(c["h"])("label",{for:"email",class:"form-label"},"Email",-1),C={class:"mb-3"},L=Object(c["h"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),I={class:"mb-3"},J=Object(c["h"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),S={class:"mb-3"},E=Object(c["h"])("label",{for:"address",class:"form-label"},"收件人地址",-1),q={class:"mb-3"},U=Object(c["h"])("label",{for:"message",class:"form-label"},"留言",-1),_={class:"text-end"},F=["disabled"];function G(e,t,a,G,M,$){var T=Object(c["G"])("Loading"),A=Object(c["G"])("Field"),B=Object(c["G"])("ErrorMessage"),R=Object(c["G"])("Form");return Object(c["y"])(),Object(c["g"])("div",n,[Object(c["j"])(T,{active:M.isLoading},null,8,["active"]),s,Object(c["h"])("div",l,[Object(c["h"])("div",r,[Object(c["h"])("div",o,[Object(c["h"])("table",i,[d,Object(c["h"])("tbody",null,[M.cart.carts?(Object(c["y"])(!0),Object(c["g"])(c["a"],{key:0},Object(c["E"])(M.cart.carts,(function(e){return Object(c["y"])(),Object(c["g"])("tr",{key:e.id},[Object(c["h"])("td",null,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return $.removeCartItem(e.id)},disabled:M.loadingItem===e.id},[M.loadingItem===e.id?(Object(c["y"])(),Object(c["g"])("i",b)):Object(c["f"])("",!0),f],8,u)]),Object(c["h"])("td",null,[Object(c["i"])(Object(c["J"])(e.product.title)+" ",1),e.coupon?(Object(c["y"])(),Object(c["g"])("div",m," 已套用優惠券 ")):Object(c["f"])("",!0)]),Object(c["h"])("td",null,[Object(c["h"])("div",j,Object(c["J"])(e.qty)+" / "+Object(c["J"])(e.product.unit),1)]),Object(c["h"])("td",h,[M.cart.final_total!==M.cart.total?(Object(c["y"])(),Object(c["g"])("small",O,"折扣價：")):Object(c["f"])("",!0),Object(c["i"])(" "+Object(c["J"])(e.final_total),1)])])})),128)):Object(c["f"])("",!0)]),Object(c["h"])("tfoot",null,[Object(c["h"])("tr",null,[p,Object(c["h"])("td",g,Object(c["J"])(M.cart.total),1)]),M.cart.final_total!==M.cart.total?(Object(c["y"])(),Object(c["g"])("tr",v,[y,Object(c["h"])("td",x,Object(c["J"])(M.cart.final_total),1)])):Object(c["f"])("",!0)])])])]),Object(c["h"])("div",k,[Object(c["j"])(R,{ref:"form",class:"col-md-6",onSubmit:$.createOrder},{default:Object(c["R"])((function(e){var a=e.errors;return[Object(c["h"])("div",w,[V,Object(c["j"])(A,{id:"email",name:"email",type:"email",class:Object(c["r"])(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:M.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return M.form.user.email=e})},null,8,["class","modelValue"]),Object(c["j"])(B,{name:"email",class:"invalid-feedback"})]),Object(c["h"])("div",C,[L,Object(c["j"])(A,{id:"name",name:"姓名",type:"text",class:Object(c["r"])(["form-control",{"is-invalid":a["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:M.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return M.form.user.name=e})},null,8,["class","modelValue"]),Object(c["j"])(B,{name:"姓名",class:"invalid-feedback"})]),Object(c["h"])("div",I,[J,Object(c["j"])(A,{id:"tel",name:"電話",type:"tel",class:Object(c["r"])(["form-control",{"is-invalid":a["電話"]}]),placeholder:"請輸入電話",rules:"required|numeric|min:8|max:10",modelValue:M.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return M.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["j"])(B,{name:"電話",class:"invalid-feedback"})]),Object(c["h"])("div",S,[E,Object(c["j"])(A,{id:"address",name:"地址",type:"text",class:Object(c["r"])(["form-control",{"is-invalid":a["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:M.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=function(e){return M.form.user.address=e})},null,8,["class","modelValue"]),Object(c["j"])(B,{name:"地址",class:"invalid-feedback"})]),Object(c["h"])("div",q,[U,Object(c["S"])(Object(c["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=function(e){return M.form.message=e})},null,512),[[c["M"],M.form.message]])]),Object(c["h"])("div",_,[Object(c["h"])("button",{type:"submit",class:"btn btn-danger",disabled:Object.keys(a).length>0||0===M.cart.carts.length}," 送出訂單 ",8,F)])]})),_:1},8,["onSubmit"])])])])}a("99af"),a("d3b7");var M=a("6be2"),$={name:"Cart",data:function(){return{loadingItem:"",isLoading:!1,cart:{carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},mounted:function(){this.getCart()},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("jasonchen","/cart");this.$http.get(t).then((function(t){t.data.success?(e.cart=t.data.data,M["a"].emit("get-cart")):alert(t.data.message)})).catch((function(e){alert(e.data.message)})).finally((function(){e.isLoading=!1}))},removeCartItem:function(e){var t=this;this.loadingItem=e,this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("jasonchen","/cart/").concat(e);this.$http.delete(a).then((function(e){alert(e.data.message)})).catch((function(e){alert(e.data.message)})).finally((function(){t.getCart(),t.loadingItem="",t.isLoading=!1}))},createOrder:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("jasonchen","/order");this.$http.post(t,{data:this.form}).then((function(t){alert(t.data.message),t.data.success&&e.$refs.form.resetForm()})).catch((function(e){alert(e.data.message)})).finally((function(){e.getCart(),e.isLoading=!1}))}}},T=a("6b0d"),A=a.n(T);const B=A()($,[["render",G]]);t["default"]=B},"6be2":function(e,t,a){"use strict";var c=function(e){return{all:e=e||new Map,on:function(t,a){var c=e.get(t);c?c.push(a):e.set(t,[a])},off:function(t,a){var c=e.get(t);c&&(a?c.splice(c.indexOf(a)>>>0,1):e.set(t,[]))},emit:function(t,a){var c=e.get(t);c&&c.slice().map((function(e){e(a)})),(c=e.get("*"))&&c.slice().map((function(e){e(t,a)}))}}},n=c();t["a"]=n},8418:function(e,t,a){"use strict";var c=a("a04b"),n=a("9bf2"),s=a("5c6c");e.exports=function(e,t,a){var l=c(t);l in e?n.f(e,l,s(0,a)):e[l]=a}},"99af":function(e,t,a){"use strict";var c=a("23e7"),n=a("da84"),s=a("d039"),l=a("e8b5"),r=a("861d"),o=a("7b0b"),i=a("07fa"),d=a("8418"),u=a("65f0"),b=a("1dde"),f=a("b622"),m=a("2d00"),j=f("isConcatSpreadable"),h=9007199254740991,O="Maximum allowed index exceeded",p=n.TypeError,g=m>=51||!s((function(){var e=[];return e[j]=!1,e.concat()[0]!==e})),v=b("concat"),y=function(e){if(!r(e))return!1;var t=e[j];return void 0!==t?!!t:l(e)},x=!g||!v;c({target:"Array",proto:!0,forced:x},{concat:function(e){var t,a,c,n,s,l=o(this),r=u(l,0),b=0;for(t=-1,c=arguments.length;t<c;t++)if(s=-1===t?l:arguments[t],y(s)){if(n=i(s),b+n>h)throw p(O);for(a=0;a<n;a++,b++)a in s&&d(r,b,s[a])}else{if(b>=h)throw p(O);d(r,b++,s)}return r.length=b,r}})},b0c0:function(e,t,a){var c=a("83ab"),n=a("5e77").EXISTS,s=a("e330"),l=a("9bf2").f,r=Function.prototype,o=s(r.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=s(i.exec),u="name";c&&!n&&l(r,u,{configurable:!0,get:function(){try{return d(i,o(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-372421bc.83f551b3.js.map